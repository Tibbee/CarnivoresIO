# CarnivoresIO
The addon is in development and currently only support .3df import-export!!!
A complete redesign of the original io_carnivores add-on, focusing on modularity, expanded features, and seamless interoperability with Blender. The goal is to make Blender the all-in-one tool for managing everything modding related to Carnivores.

# CarnivoresIO — User Manual
This README.md is currently autogenerated, while development is in process.
CarnivoresIO is a Blender add‑on that provides import and export support for Carnivores .3df model files. It focuses on preserving model geometry, textures, and bone data while offering fast face-flag editing and selection tools inside Blender.

This manual explains the add‑on's features and how to use them.

## Where to find the tools in Blender
- Import: File > Import > Carnivores 3DF (.3df)
- Export: File > Export > Carnivores 3DF (.3df)
- Face flag and selection tools: 3D View > Sidebar > Carnivores

## Quick Start
1. Enable the add‑on in Blender Preferences > Add‑ons.
2. To import a model: File > Import > Carnivores 3DF and set options such as scale, axis conversion, texture import, and bone import mode.
3. To export a model: select a mesh (or multiple meshes) and choose File > Export > Carnivores 3DF. Configure scale, texture export, and whether to export multiple files.

## Import options explained
- Scale and Axis Conversion: Adjust to match Blender scene units and orientation.
- Import Textures / Create Materials: When enabled the add‑on will import texture pixels and build a material automatically.
- Smooth Faces: Control whether faces are imported smooth or flat-shaded.
- Bone Import Type:
  - None: geometry only.
  - Armature: creates a Blender armature and vertex groups.
  - Hooks: creates empties and hook modifiers to emulate bone-driven vertices.
- Run Validations: optional checks and automatic fixes for common file issues; can show warnings.

## Export options explained
- Scale and Axis Conversion: transforms geometry into the .3df coordinate system.
- Export Textures: attempts to find a suitable image in the object's material nodes and pack it into the exported file.
- Flip U / Flip V: invert integer UV packing if the target tool expects mirrored coordinates.
- Export Multiple Files: export each selected mesh to a separate .3df file named from the object.

## Face flags (3df_flags)
- Representation: face‑domain integer attribute named "3df_flags".
- Create: use the "Create 3df_flags" operator in the Carnivores panel if your mesh lacks it.
- Edit: a dedicated UI lists common flags and provides Set/Clear/Toggle buttons for selected faces.
- Batch operations: the add‑on performs vectorized flag updates for speed on large models.
- Selection by flags: build a mask of flags, choose mode (Has Any / Has All / Has None) and action (Select / Deselect / Invert) to modify selection.

## Textures & materials
- The add‑on imports raw texture pixels and generates a Blender image and material tailored for Carnivores look.
- For export, it seeks the first image texture node on the object’s materials. Ensure a valid UV layer and image are present.
- Typical texture width constraint: standard Carnivores textures use fixed width; check the export UI if a texture cannot be exported.

## Bones & vertex ownership
- Import: bone data becomes vertex groups (for armatures) or hook empties (for hooks). Parent relationships are preserved where possible.
- Export: vertex owners are derived from vertex groups or hooks so the exported model contains bone indices compatible with the game format.
- Duplicate names and Blender suffixes (e.g., ".001") are handled with best‑effort matching.

## Performance notes
- The add‑on uses NumPy and bulk attribute access to accelerate large imports/exports and flag operations.
- UV, face and vertex data are processed in vectorized batches to minimize Python-level loops and Blender API overhead.
- For very large models, consider disabling optional validations to speed up import.

## Troubleshooting & tips
- No '3df_flags'? Use the Create button in the Carnivores panel.
- Texture export fails: verify the object has an active UV layer and a material with an Image Texture node.
- Bone mismatch: ensure vertex groups are named to match the armature or hook object names; remove Blender numeric suffixes if needed.
- If imports produce warnings, review the displayed message box — many warnings are non‑fatal but informative.

## License & support
- Licensed under GNU GPL v3 (see the LICENSE file).
- For bugs or feature requests, open an issue where you obtained the add‑on and include Blender version, a small example file, and
